!function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){function n(e,r,t,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void t(e)}u.done?r(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var r=this,t=arguments;return new Promise(function(o,a){var i=e.apply(r,t);function u(e){n(i,o,a,u,c,"next",e)}function c(e){n(i,o,a,u,c,"throw",e)}u(void 0)})}}function a(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=t(1).supportedChains,u=t(2),c=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.tronWeb=!1,this.web3=!1}var r,t,n;return r=e,t=[{key:"init",value:function(e,r){switch(e){case"trx":this.tronWeb=r;break;case"eth":this.web3=instance0}}},{key:"sign",value:function(){var e=o(regeneratorRuntime.mark(function e(r,t){var n,o,a,i,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>2&&void 0!==c[2]?c[2]:"ps",t=normalizeChain(t)){e.next=4;break}throw new Error("A valid, supported chain is required.");case 4:if("trx"!==t||this.tronWeb){e.next=8;break}throw new Error("TronWeb not found");case 8:if("etx"!==t||this.web3){e.next=10;break}throw new Error("Web3 not found");case 10:i=u.hexEncode(r),e.t0=t,e.next="trx"===e.t0?14:"eth"===e.t0?21:28;break;case 14:return a=this.tronWeb.defaultAddress.base58,e.next=17,this.tronSign(i);case 17:return e.t1=e.sent,e.t2=n,o=[e.t1,"tronweb",e.t2].join(":"),e.abrupt("break",28);case 21:return a=this.web3.eth.accounts[0],e.next=24,this.ethSign(i,a,n);case 24:return e.t3=e.sent,e.t4=n,o=[e.t3,"web3",e.t4].join(":"),e.abrupt("break",28);case 28:if(o){e.next=30;break}return e.abrupt("return",!1);case 30:return e.abrupt("return",[r,[t,a].join(":"),o].join(";"));case 31:case"end":return e.stop()}},e,this)}));return function(r,t){return e.apply(this,arguments)}}()},{key:"tronSign",value:function(){var e=o(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.tronWeb.trx.sign(r));case 1:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()},{key:"ethSign",value:function(){var e=o(regeneratorRuntime.mark(function e(r,t,n){var o,a,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Web3 not connected");case 2:if("ps"!==n){e.next=7;break}a="personal_sign",o=[r,t],e.next=13;break;case 7:if("t1"!==n){e.next=12;break}a="eth_signTypedData",o=[{type:"string",name:"token",value:r}],e.next=13;break;case 12:throw new Error("Format not supported");case 13:return e.abrupt("return",new Promise(function(e,r){i.web3.currentProvider.sendAsync({method:a,params:o,from:t},function(t,n){t&&r(t),n.error&&r(n.error),e(n.result)})}));case 14:case"end":return e.stop()}},e)}));return function(r,t,n){return e.apply(this,arguments)}}()}],n=[{key:"normalizeChain",value:function(e){if("string"==typeof e&&i.includes(e.toLowerCase()))return e.toLowerCase()}}],t&&a(r.prototype,t),n&&a(r,n),e}();e.exports=c},function(e,r){e.exports={supportedChains:["eth","trx"]}},function(e,r){function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,(n=[{key:"hexEncode",value:function(e){var r,t="";for(r=0;r<e.length;r++)t+=("000"+e.charCodeAt(r).toString(16)).slice(-4);return t}},{key:"hexDecode",value:function(e){var r,t=e.match(/.{1,4}/g)||[],n="";for(r=0;r<t.length;r++)n+=String.fromCharCode(parseInt(t[r],16));return n}}])&&t(r.prototype,n),o&&t(r,o),e}();e.exports=n}]);
//# sourceMappingURL=0xauth.js.map